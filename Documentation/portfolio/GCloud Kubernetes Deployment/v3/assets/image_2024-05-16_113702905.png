<!DOCTYPE html> <html> <body> <p>For deploying my microservices and frontend, I decided to use GCloud. The justifications for doing so can be found in the cloud providers research document <span data-type="mention" data-id="438040" data-label="Cloud providers research" data-mention-type="evidence">@Cloud providers research</span></p><p>The deployment takes place automatically in the CI as a last stage of the main branch. It uses kubectl to declaratively apply the manifest files to the kubernetes cluster. The stage takes advantage of a gcloud service account that is priveledged to only execute actions on the specific gcloud project</p><p><img src="https://portfolio.drieam.app/api/public/v1/blobs/545ea1b8-b9c6-4fdf-9e1d-cab50ed05fbf/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBejZvQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--430b71b2ef8bfd3cf9729d75f9e6c629492517a6/image_2024-05-22_095349159.png" data-key="oj3xnlasw5ud4qukg9k91jm2xyp7"></p><p>The frontend, including all of the microservices, are served on the domain <a target="_blank" rel="noopener noreferrer nofollow" href="http://ydoykov.nl">ydoykov.nl</a> through an ingress controller. The setup was quite tricky, since it required to setup a static ip and purchase a domain, after which a ManagedCertificate and a FrontendConfig needed to be associated with the ingress controller</p><pre><code class="language-yaml">apiVersion: networking.gke.io/v1 kind: ManagedCertificate metadata: name: househunters-certificate namespace: househunters spec: domains: - ydoykov.nl --- apiVersion: networking.gke.io/v1beta1 kind: FrontendConfig metadata: name: frontend-config namespace: househunters spec: redirectToHttps: enabled: true responseCodeName: FOUND</code></pre><p>The SSL certificate took about 24 hours to activate so that an HTTPS connection could be established. The DNS addresses of the registrar also needed to be updated accordingly.</p><p><img src="https://portfolio.drieam.app/api/public/v1/blobs/545ea1b8-b9c6-4fdf-9e1d-cab50ed05fbf/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBM3lNQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--08affec065c9ca72ff8ef877bb853979c6d0f7d5/image_2024-05-16_113622945.png" data-key="xbrr5p0921bf9173sjf2d57ol61l"><br>After all of this setup, the result is a deployed application on the domain over an HTTPS connection</p><p><img src="https://portfolio.drieam.app/api/public/v1/blobs/545ea1b8-b9c6-4fdf-9e1d-cab50ed05fbf/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBMzJNQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--b0c9574aaa38619acee6ce3b1680251813476aca/image_2024-05-16_113702905.png" data-key="kl3fe37bt3yaxfjpjp1lon9e4a5m"></p> </body> </html>