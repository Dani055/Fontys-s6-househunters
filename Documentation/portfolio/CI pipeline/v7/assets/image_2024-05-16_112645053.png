<!DOCTYPE html> <html> <body> <p>This is what the current CI/CD pipeline looks like in GitLab:<br><img src="https://portfolio.drieam.app/api/public/v1/blobs/545ea1b8-b9c6-4fdf-9e1d-cab50ed05fbf/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBM0dNQXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--176c220739850ea377ab8aa856aed14a18fd0c68/image_2024-05-16_112645053.png" data-key="8ndb0m32az5qyn9n4aifnub2f9k7">The GitLab runner is configured to run on the developer's personal machine with low privileges. In order to isolate each CI job, the runner is instructed to run all jobs in docker containers. This makes it easier to manage jobs without interfering with other components of the machine the runner is on.</p><p><img src="https://portfolio.drieam.app/api/public/v1/blobs/545ea1b8-b9c6-4fdf-9e1d-cab50ed05fbf/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBMld6QXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--64223c5c91b56e450471fe72e5a96a3b25ac74a4/image_2024-05-25_230352843.png" data-key="emq59y96qprje6jkx9x6krcdooi0"><br><br>Below can be seen the stages of the ci/cd pipeline, along with the most notable jobs in it. The pipeline is located in GitLab and is described according to their gitlab-ci.yml guidelines.</p><pre><code>stages: - build - test - e2e - security - image_build - deploy_prod</code></pre><p>In order to apply best practices to for the CI/CD yaml file, common scripts and template are leveraged to avoid code duplication. Such common scripts deal with installing node packages, declaring stages with variables and services, etc.</p><pre><code># Common scripts .common_scripts: npm_shared: - cd shared - npm install - cd ../ npm_auth_ms: - cd auth-ms - npm install npm_listing_ms: - cd listing-ms - npm install npm_bid_ms: - cd bid-ms - npm install</code></pre><pre><code class="language-yaml"># Templates .build_template: image: node:iron-alpine stage: build before_script: - !reference [.common_scripts, npm_shared] .test_template: image: node:iron-alpine services: - name: mongodb/mongodb-community-server:latest alias: mongo-integration stage: test before_script: - !reference [.common_scripts, npm_shared]</code></pre><p></p> </body> </html>