<!DOCTYPE html> <html> <body> <p>The security stage of the CI/CD pipeline deals with security/penetration tests along with vulnerability scanning on the entire application.</p><p><img src="https://portfolio.drieam.app/api/public/v1/blobs/545ea1b8-b9c6-4fdf-9e1d-cab50ed05fbf/eyJfcmFpbHMiOnsibWVzc2FnZSI6IkJBaHBBMUd6QXc9PSIsImV4cCI6bnVsbCwicHVyIjoiYmxvYl9pZCJ9fQ==--9026a3dbccdf21621b8f58a790484de648b7af26/image_2024-05-25_224340036.png" data-key="6znd7bfn4uybmwz4vv4t6hb4mmkf"></p><p>The setup is pretty similar as the e2e stage. It uses the same <code>docker-compose</code> files where the entire application is running in a docker environment, after which a full scan of OWASP's ZAP tool is executed on <code>localhost</code> to conduct security and penetration tests.</p><p>The code for the security stage in the gitlab CI definition file is as follows:</p><pre><code>test-e2e: stage: security image: docker:25.0.3 services: - docker:25.0.3-dind variables: # connect to the docker daemon inside of the job container (docker-in-docker) DOCKER_HOST: tcp://docker:2375 DOCKER_TLS_CERTDIR: "" script: - docker compose -f docker-compose-e2e.yml -f docker-compose-e2e-ci.yml up -d - sleep 20 - docker run --network=host --rm -v $(pwd)/zap:/zap/wrk/ -t softwaresecurityproject/zap-stable zap-full-scan.py -t http://localhost:3000 -c zap.conf </code></pre> </body> </html>